---
openapi: 3.0.3
info:
  title: PROXIA-MES Monitoring-Dashboard COMU-DB-Service API
  description: PROXIA-MES Monitoring-Dashboard COMU-DB-Service API
  version: '1.0.9'
servers:
  - url: "http://localhost:8080/proxia-mes/monitoring-dashboard/comu-db-service/v1"
tags:
  - name: resources
    description: Everything about dashboard resources
paths:
  "/persons":
    get:
      tags:
        - resources
      summary: returns all persons
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/persons"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/machines":
    get:
      tags:
        - resources
      summary: returns all machines
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/machines"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/resource-statuses":
    get:
      tags:
        - resource-status
      summary: returns all resource-statuses
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/resourceStatuses"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
components:
  securitySchemes:
    OpenID:
      type: openIdConnect
      openIdConnectUrl: http://localhost:8080/auth/realms/xi-mes/.well-known/openid-configuration
  schemas:
    id:
      type: string
      description: The unque id of an element (UUID4 or C_<String>)
      example: 2a6783cc-f1b4-4b74-9fd8-e6460e9a0028
      maxLength: 50
      minLength: 3
    name:
      type: string
      description: The name of an element
      maxLength: 50
      minLength: 3
    persons:
      type: array
      items:
        $ref: '#/components/schemas/person'
    machines:
      type: array
      items:
        $ref: '#/components/schemas/machine'
    machine:
      type: object
      required:
        - id
        - name
      properties:
        id:
          $ref: '#/components/schemas/id'
        name:
          $ref: '#/components/schemas/name'
        plant:
          type: string
          description: The plant of the machine
          maxLength: 255
          minLength: 3
        state:
          type: string
          description: The current state of the machine
          maxLength: 255
          minLength: 3
        groupName:
          $ref: '#/components/schemas/name'
        mainGroupName:
          $ref: '#/components/schemas/name'
        description:
          type: string
          description: The description of the machine
          maxLength: 2000
          minLength: 0
        inventoryNumber:
          type: string
          description: The inventory number of the machine
          maxLength: 50
          minLength: 0 
        manufacturer:
          type: string
          description: The manufacurer of the machine
          maxLength: 50
          minLength: 0
        machineType:
          type: string
          description: The type of the machine
          maxLength: 50
          minLength: 0
        controlUnit:
          type: string
          description: The control unit of the machine
          maxLength: 50
          minLength: 0
        factoryNumber:
          type: string
          description: The type of the machine
          maxLength: 50
          minLength: 0
    person:
      type: object
      required:
        - id
        - name
      properties:
        id:
          $ref: '#/components/schemas/id'
        name:
          $ref: '#/components/schemas/name'
        lastName:
          type: string
          description: The lastname of the person
          maxLength: 50
          minLength: 0
        firstName:
          type: string
          description: The firstname of the person
          maxLength: 50
          minLength: 0
        persId:
          type: string
          description: The HR person id
          maxLength: 50
          minLength: 0
        mail:
          type: string
          description: The e-mail address
          maxLength: 50
          minLength: 0
        mobile:
          type: string
          description: The mobile phone number of the person
          maxLength: 50
          minLength: 0
    resourceStatuses:
      type: array
      items:
        $ref: '#/components/schemas/resourceStatus'
    resourceStatus:
      type: object
      required:
        - id
        - name
        - color
      properties:
        id:
          $ref: '#/components/schemas/id'
        name:
          $ref: '#/components/schemas/name'
        color:
          type: string
          description: The color of a resource status
          maxLength: 50
          minLength: 3
        groupName:
          $ref: '#/components/schemas/name'
        mainGroupName:
          $ref: '#/components/schemas/name'