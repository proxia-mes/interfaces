---
openapi: 3.0.3
info:
  title: PROXIA-MES Monitoring-Dashboard COMU-DB-Service API
  description: PROXIA-MES Monitoring-Dashboard COMU-DB-Service API
  version: '1.0.41'
servers:
  - url: "http://localhost:5000/proxia-mes/monitoring-dashboard/comu-db-service/v1"
paths:
  "/resources":
    get:
      tags:
        - resource
      summary: returns resources (machines and workplaces)
      parameters:
        - in: query
          name: resourceIds
          schema:
            type: array
            items:
              type: string
          description: the resourceIds of the requested resources
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/resource"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/oees":
    get:
      tags:
        - oee
      summary: returns all oees
      parameters:
        - in: query
          name: resourceIds
          schema:
            type: array
            items: 
              type: string
          description: the resourceIds of the requested oees 
        - in: query
          name: timespan
          schema:
            type: integer
          description: the timespan in days of the requested oees 
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/oee"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/resource/{resourceId}":
    get:
      tags:
        - resource
      summary: returns a resource
      parameters:
        - name: resourceId
          in: path
          required: true
          style: simple
          schema:
            $ref: "#/components/schemas/id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/resource"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/persons":
    get:
      tags:
        - person
      summary: returns persons
      parameters:
        - in: query
          name: resourceIds
          schema:
            type: array
            nullable: true
            items:
              type: string
          description: the resourceIds of the requested resources
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/person"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/person/{personId}":
    get:
      tags:
        - person
      summary: returns a person
      parameters:
        - name: personId
          in: path
          required: true
          style: simple
          schema:
            $ref: "#/components/schemas/id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/person"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/orders":
    get:
      tags:
        - order
      summary: returns all orders
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/order"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/order/{orderId}":
    get:
      tags:
        - order
      summary: returns a order
      parameters:
        - name: orderId
          in: path
          required: true
          style: simple
          schema:
            $ref: "#/components/schemas/id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/order"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/worktickets":
    get:
      tags:
        - workticket
      summary: returns all worktickets
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/workticket"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/workticket/{workticketId}":
    get:
      tags:
        - workticket
      summary: returns a workticket
      parameters:
        - name: workticketId
          in: path
          required: true
          style: simple
          schema:
            $ref: "#/components/schemas/id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/workticket"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/plants":
    get:
      tags:
        - plant
      summary: returns plants
      parameters:
        - in: query
          name: resourceIds
          schema:
            type: array
            items:
              type: string
          description: the resourceIds of the requested resources
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/plant"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { } 
  "/plant/{plantId}":
    get:
      tags:
        - plant
      summary: returns a plant
      parameters:
        - name: plantId
          in: path
          required: true
          style: simple
          schema:
            $ref: "#/components/schemas/id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/plant"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/workplaces":
    get:
      tags:
        - resource
      summary: returns workplaces
      parameters:
        - in: query
          name: resourceIds
          schema:
            type: array
            items:
              type: string
          description: the resourceIds of the requested resources
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/workplace"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/workplace/{workplaceId}":
    get:
      tags:
        - resource
      summary: returns a workplace
      parameters:
        - name: workplaceId
          in: path
          required: true
          style: simple
          schema:
            $ref: "#/components/schemas/id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/workplace"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/machines":
    get:
      tags:
        - resource
      summary: returns machines
      parameters:
        - in: query
          name: resourceIds
          schema:
            type: array
            items:
              type: string
          description: the resourceIds of the requested resources
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/machine"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/machine/{machineId}":
    get:
      tags:
        - resource
      summary: returns a machine
      parameters:
        - name: machineId
          in: path
          required: true
          style: simple
          schema:
            $ref: "#/components/schemas/id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/machine"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/resource-statuses":
    get:
      tags:
        - resource-status
      summary: returns all resource-statuses
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/resourceStatus"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: {  }
  "/resource-status/{resourceStatusId}":
    get:
      tags:
        - resource-status
      summary: returns a resource-status
      parameters:
        - name: resourceStatusId
          in: path
          required: true
          style: simple
          schema:
            $ref: "#/components/schemas/id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/resourceStatus"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/workticket-allocations":
    get:
      tags:
        - workticket
      summary: returns workticket-allocations (all/per resource/per workticket)
      parameters:
        - name: resource
          in: query
          style: simple
          schema:
            $ref: "#/components/schemas/id"
        - name: workticket
          in: query
          style: simple
          schema:
            $ref: "#/components/schemas/id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/workticketAllocation"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/workticket-allocation/{workticketAllocationId}":
    get:
      tags:
        - workticket
      summary: returns a workticket-allocation
      parameters:
        - name: workticketAllocationId
          in: path
          required: true
          style: simple
          schema:
            $ref: "#/components/schemas/id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/workticketAllocation"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/person-allocations":
    get:
      tags:
        - person
      summary: returns person allocations to resource
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/personAllocation"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }
  "/person-allocation/{personAllocationId}":
    get:
      tags:
        - person
      summary: returns a person-allocation
      parameters:
        - name: personAllocationId
          in: path
          required: true
          style: simple
          schema:
            $ref: "#/components/schemas/id"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/personAllocation"
        '204':
          description: No Content
          content: { }
        '400':
          description: Bad Request
          content: { }
        '401':
          description: Unauthorized
          content: { }
        '403':
          description: Forbidden
          content: { }
        '500':
          description: Internal Server Error
          content: { }

components:
  schemas:
    id:
      type: string
      description: The unque id of an element, UUID4 or C_* e.g. 2a6783cc-f1b4-4b74-9fd8-e6460e9a0028
      maxLength: 50
      minLength: 3
    name:
      type: string
      description: The name of an element
      maxLength: 50
      minLength: 3
    workplace:
      type: object
      required:
        - id
      properties:
        id:
          $ref: '#/components/schemas/id'
        name:
          $ref: '#/components/schemas/name'
        plant:
          $ref: '#/components/schemas/name'
        state:
          $ref: '#/components/schemas/name'
        color:
          type: string
          description: The color of the resource status
          maxLength: 50
          minLength: 3
        group:
          $ref: '#/components/schemas/name'
        mainGroup:
          $ref: '#/components/schemas/name'
    plant:
      type: object
      required:
        - id
      properties:
        id:
          $ref: '#/components/schemas/id'
        name:
          $ref: '#/components/schemas/name'
    machine:
      type: object
      required:
        - id
      properties:
        id:
          $ref: '#/components/schemas/id'
        name:
          $ref: '#/components/schemas/name'
        plant:
          $ref: '#/components/schemas/name'
        state:
          $ref: '#/components/schemas/name'
        color:
          type: string
          description: The color of the resource status
          maxLength: 50
          minLength: 3
        group:
          $ref: '#/components/schemas/name'
        mainGroup:
          $ref: '#/components/schemas/name'
        description:
          type: string
          description: The description of the machine
          maxLength: 2000
          minLength: 0
        inventoryNumber:
          type: string
          description: The inventory number of the machine
          maxLength: 50
          minLength: 0
        manufacturer:
          type: string
          description: The manufacurer of the machine
          maxLength: 50
          minLength: 0
        machineType:
          type: string
          description: The type of the machine
          maxLength: 50
          minLength: 0
        controlUnit:
          type: string
          description: The control unit of the machine
          maxLength: 50
          minLength: 0
        factoryNumber:
          type: string
          description: The type of the machine
          maxLength: 50
          minLength: 0
    resource:
      type: object
      required:
        - id
      properties:
        id:
          $ref: '#/components/schemas/id'
        name:
          $ref: '#/components/schemas/name'
        plant:
          $ref: '#/components/schemas/name'
        state:
          $ref: '#/components/schemas/name'
        color:
          type: string
          description: The color of the resource status
          maxLength: 50
          minLength: 3
        group:
          $ref: '#/components/schemas/name'
        mainGroup:
          $ref: '#/components/schemas/name'
        resourceType:
          type: string
          enum:
            - 'machine'
            - 'workplace' 
    oee:
      type: object
      required:
        - resourceId
        - calDay
        - shiftId
      properties:
        resourceId:
          $ref: '#/components/schemas/id'
        resource:
          $ref: '#/components/schemas/name'
        shiftId:
          $ref: '#/components/schemas/id'
        shift:
          $ref: '#/components/schemas/name'
        calDay:
          type: string
          format: date-time
        performance:
          type: number
          format: double
          nullable: true
        availability:
          type: number
          format: double
          nullable: true
        quality:
          type: number
          format: double
          nullable: true
        oeeValue:
          type: number
          format: double
          nullable: true
        wtCount:
          type: integer
          nullable: true
        prodTime:
          type: number
          format: double
          nullable: true
        plannedProdTime:
          type: number
          format: double
          nullable: true
        plannedAllocationTime:
          type: number
          format: double
          nullable: true
        setupTime:
          type: number
          format: double
          nullable: true
        sideTime:
          type: number
          format: double
          nullable: true
        failureTime:
          type: number
          format: double
          nullable: true
        goodQty:
          type: number
          format: double
          nullable: true
        scrapQty:
          type: number
          format: double
          nullable: true
        complaintQty:
          type: number
          format: double
          nullable: true
        reworkQty:
          type: number
          format: double
          nullable: true
    person:
      type: object
      required:
        - id
      properties:
        id:
          $ref: '#/components/schemas/id'
        name:
          $ref: '#/components/schemas/name'
        plant:
          $ref: '#/components/schemas/name'
        state:
          $ref: '#/components/schemas/name'
        group:
          $ref: '#/components/schemas/name'
        mainGroup:
          $ref: '#/components/schemas/name'
        lastName:
          type: string
          description: The lastname of the person
          maxLength: 50
          minLength: 0
        firstName:
          type: string
          description: The firstname of the person
          maxLength: 50
          minLength: 0
        persId:
          type: string
          description: The HR person id
          maxLength: 50
          minLength: 0
        mail:
          type: string
          description: The e-mail address
          maxLength: 50
          minLength: 0
        mobile:
          type: string
          description: The mobile phone number of the person
          maxLength: 50
          minLength: 0
    resourceStatus:
      type: object
      required:
        - id
      properties:
        id:
          $ref: '#/components/schemas/id'
        name:
          $ref: '#/components/schemas/name'
        color:
          type: string
          description: The color of a resource status
          maxLength: 50
          minLength: 3
        group:
          $ref: '#/components/schemas/name'
        mainGroup:
          $ref: '#/components/schemas/name'
    order:
      type: object
      required:
        - id
      properties:
        id:
          $ref: '#/components/schemas/id'
        name:
          $ref: '#/components/schemas/name'
        plant:
          $ref: '#/components/schemas/name'
        type:
          $ref: '#/components/schemas/name'
        customer:
          $ref: '#/components/schemas/name'
        customerOrder:
          $ref: '#/components/schemas/name'
        customerOrderNumber:
          type: string
          description: The customer-order number of the order
          maxLength: 255
          minLength: 1
        customerOrderDelivery:
          type: string
          format: date-time
          nullable: true
          description: The scheduled delivery of the customer-order of the order
        beginScheduled:
          type: string
          format: date-time
          nullable: true
          description: The scheduled begin of the order
        endScheduled:
          type: string
          format: date-time
          nullable: true
          description: The scheduled end of the order          
        deliveryScheduled:
          type: string
          format: date-time
          nullable: true
          description: The scheduled delivery of the order
        earliestStartScheduled:
          type: string
          format: date-time
          nullable: true
          description: The earliest scheduled begin of the order
        desiredDue:
          type: string
          format: date-time
          nullable: true
          description: The scheduled desire of the order
        priority:
          type: number
          nullable: true
          description: The priority of the order
        description:
          type: string
          description: The description of the order
          maxLength: 255
          minLength: 1
    workticket:
      type: object
      required:
        - id
      properties:
        id:
          $ref: '#/components/schemas/id'
        name:
          $ref: '#/components/schemas/name'
        beginScheduled:
          type: string
          format: date-time
          nullable: true
          description: The scheduled begin of the wt
        endScheduled:
          type: string
          format: date-time
          nullable: true
          description: The scheduled end of the wt
        status:
          $ref: '#/components/schemas/name'
        ppsOrder:
          type: string
          description: The order of the wt in the PPS
          maxLength: 255
          minLength: 3
        ppsArticleNumber:
          type: string
          description: The article number of the wt in the PPS
          maxLength: 255
          minLength: 3
        ppsArticle:
          type: string
          description: The article of the wt in the PPS
          maxLength: 255
          minLength: 3
        targetQty:
          type: number
          nullable: true
          description: The target quantitiy of the wt
        plannedSetuptime:
          type: number
          nullable: true
        plannedProcesstime:
          type: number
          nullable: true
        confirmedGoodQty:
          type: number
          nullable: true
        confirmedScrapQty:
          type: number
          nullable: true
        confirmedReworkQty:
          type: number
          nullable: true
        goodQty:
          type: number
          nullable: true
          description: The good quantitiy of the wt, calculated from TSF_WT_QTY
        scrapQty:
          type: number
          nullable: true
          description: The scrap quantitiy of the wt, calculated from TSF_WT_QTY
        reworkQty:
          type: number
          nullable: true
          description: The rework quantitiy of the wt, calculated from TSF_WT_QTY
        confirmedSetuptime:
          type: number
          nullable: true
        confirmedProcesstime:
          type: number
          nullable: true
        type:
          $ref: '#/components/schemas/name'
        orderId:
          $ref: '#/components/schemas/id'
        order:
          $ref: '#/components/schemas/name'
        plant:
          $ref: '#/components/schemas/name'
        earliestStartScheduled:
          type: string
          format: date-time
          nullable: true
          description: The earliest scheduled begin of the wt
        desiredDue:
          type: string
          format: date-time
          nullable: true
          description: The scheduled desire of the wt
        plannedResourceId:
          $ref: '#/components/schemas/id'
        plannedResource:
          $ref: '#/components/schemas/name'
    workticketAllocation:
      type: object
      required:
        - id
      properties:
        id:
          $ref: '#/components/schemas/id'
        workticketId:
          $ref: '#/components/schemas/id'
        workticket:
          $ref: '#/components/schemas/name'
        resourceId:
          $ref: '#/components/schemas/id'
        resource:
          $ref: '#/components/schemas/name'
        workplaceId:
          $ref: '#/components/schemas/id'
        workplace:
          $ref: '#/components/schemas/name'
        begin:
          type: string
          format: date-time
          nullable: true
          description: The  begin of the allocation
        end:
          type: string
          format: date-time
          nullable: true
          description: The end of the allocation
    personAllocation:
      type: object
      required:
        - resourceId
        - begin
      properties:
        resourceId:
          $ref: '#/components/schemas/id'
        resource:
          $ref: '#/components/schemas/name'
        personId:
          $ref: '#/components/schemas/id'
        person:
          $ref: '#/components/schemas/name'
        begin:
          type: string
          format: date-time
          nullable: true
        end:
          type: string
          format: date-time
          nullable: true
          description: The end of the allocation